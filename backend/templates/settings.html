<!DOCTYPE html>
<html class="dark" lang="en">
   <head>
      <meta charset="utf-8" />
      <meta content="width=device-width, initial-scale=1.0" name="viewport" />
      <title>Expense Tracker Dashboard - Dark Theme</title>
      <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
      <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
      <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
      <!-- <script>
         tailwind.config = {
           darkMode: "class",
           theme: {
             extend: {
               colors: {
                 primary: "#1173d4",
                 background: "#101922",
                 card: "#1E1E1E",
                 text: "#E5E7EB",
                 muted: "#9CA3AF",
                 border: "#2D2D2D",
                 success: "#22C55E",
                 danger: "#EF4444",
                 info: "#3B82F6"
               },
               fontFamily: {
                 sans: ["Inter", "sans-serif"],
               },
               borderRadius: {
                 DEFAULT: "0.75rem",
               },
               boxShadow: {
                 soft: "0 2px 6px rgba(0,0,0,0.25)",
               }
             },
           },
         };
         </script> -->
      <script>
         tailwind.config = {
           darkMode: "class",
           theme: {
             extend: {
               colors: {
                 primary: "#2563EB",   // Bright blue for buttons, highlights
                 background: "#101922", // Main background
                 card: "#1F2937",       // Section cards
                 sidebar: "#111827",    // Sidebar
                 text: "#FFFFFF",       // Main text
                 muted: "#9CA3AF",      // Secondary text
                 border: "#374151",     // Divider
                 success: "#16A34A",    // Green
                 danger: "#DC2626",     // Red
                 info: "#3B82F6"        // Accent blue
               },
               fontFamily: {
                 sans: ["Inter", "sans-serif"],
               },
               borderRadius: {
                 DEFAULT: "0.5rem",
               },
               boxShadow: {
                 soft: "0 2px 4px rgba(0,0,0,0.2)",
               }
             },
           },
         };
      </script>
      <style>
         body {
         font-size: 0.9rem; /* smaller base */
         background-color: #121212;
         color: #E5E7EB;
         }
         .chart-placeholder {
         display: flex;
         align-items: center;
         justify-content: center;
         height: 100%;
         width: 100%;
         color: #6B7280;
         font-size: 0.85rem;
         }
         .material-symbols-outlined {
         font-variation-settings: "FILL" 0, "wght" 400, "GRAD" 0, "opsz" 24;
         }
      </style>
   </head>
   <body class="bg-background font-sans text-text">
      <div class="flex h-screen">
      <!-- Sidebar -->
      <aside class="w-60 bg-card border-r border-border hidden lg:flex flex-col fixed h-full">
         <div class="flex items-center gap-2 px-5 h-16 border-b border-border">
            <span class="material-symbols-outlined text-primary">account_balance</span>
            <h1 class="text-base font-semibold">ExpenseApp</h1>
         </div>
         <nav class="flex-1 p-3 space-y-1 text-sm">
            <a class="flex items-center gap-2 rounded-md px-3 py-2 text-muted hover:bg-gray-800" href="{{ url_for('dashboard') }}">
            <span class="material-symbols-outlined">dashboard</span> Dashboard
            </a>
            <a class="flex items-center gap-2 rounded-md px-3 py-2 text-muted hover:bg-gray-800" href="{{ url_for('expense') }}">
            <span class="material-symbols-outlined">add_box</span> Add Expense
            </a>
            <a class="flex items-center gap-2 rounded-md px-3 py-2 text-muted hover:bg-gray-800" href="{{ url_for('report') }}">
            <span class="material-symbols-outlined">analytics</span> Reports
            </a>
            <a class="flex items-center gap-2 rounded-md bg-primary/20 text-primary px-3 py-2" href="{{ url_for('settings') }}">
            <span class="material-symbols-outlined">settings</span> Settings
            </a>
         </nav>
         <div class="p-3">
            <a class="flex items-center gap-2 rounded-md px-3 py-2 text-muted hover:bg-gray-800" href="#">
            <span class="material-symbols-outlined">logout</span> Logout
            </a>
         </div>
      </aside>
      <div class="flex-1 flex flex-col overflow-y-auto lg:ml-60">
         <!-- Header -->
         <header class="sticky top-0 z-10 flex h-16 items-center justify-between border-b border-border bg-background/80 px-4 sm:px-6">
            <h2 class="text-lg font-semibold">Settings</h2>
            <div class="flex items-center gap-3">
               <button class="p-2 rounded-full hover:bg-gray-800 text-muted">
               <span class="material-symbols-outlined">notifications</span>
               </button>
               <button class="flex items-center gap-1 bg-card text-sm px-3 py-1.5 rounded-md hover:bg-gray-700">
               <span class="material-symbols-outlined text-sm">download</span> CSV
               </button>
               <button class="flex items-center gap-1 bg-primary text-white text-sm px-3 py-1.5 rounded-md hover:bg-primary/90">
               <span class="material-symbols-outlined text-sm">picture_as_pdf</span> PDF
               </button>
            </div>
         </header>
         <main class="flex-1 overflow-y-auto p-3 sm:p-4 lg:p-6">
            <header class="lg:hidden flex items-center justify-between mb-4">
               <div class="text-xl font-bold text-gray-900 dark:text-white">Expenso</div>
               <button class="p-2 rounded-md text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800" id="mobile-menu-button">
                  <svg class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                     <path d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
                  </svg>
               </button>
            </header>
            <div class="lg:hidden hidden mb-4" id="mobile-menu">
               <nav class="flex flex-col gap-1.5">
                  <!-- repeat the same links here -->
               </nav>
            </div>
            <div class="max-w-3xl mx-auto">
               <div class="space-y-8">
                  <section>
                     <h2 class="text-lg font-semibold text-gray-900 dark:text-white pb-2 border-b border-gray-200 dark:border-gray-700">Personal Information</h2>
                     <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                           <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1" for="name">Name</label>
                           <input class="form-input w-full rounded-lg bg-white/5 dark:bg-black/10 border-gray-300 dark:border-gray-700 focus:ring-primary focus:border-primary text-gray-900 dark:text-white text-sm" id="name" type="text" value="John Doe"/>
                        </div>
                        <div>
                           <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1" for="email">Email</label>
                           <input class="form-input w-full rounded-lg bg-white/5 dark:bg-black/10 border-gray-300 dark:border-gray-700 focus:ring-primary focus:border-primary text-gray-900 dark:text-white text-sm" id="email" type="email" value="john.doe@example.com"/>
                        </div>
                        <div>
                           <label class="block text-sm font-medium mb-1">Salary</label>
<input
  id="salary"
  name="salary"
  type="number"
  class="form-input w-full rounded-lg bg-white/5 border-gray-700 text-white text-sm"
  value="450000"
/>
                        </div>
                     </div>
                     <div class="mt-4">
                        <button id="update-btn"
                           class="px-3 py-1.5 bg-primary text-white text-sm font-medium rounded-lg hover:bg-opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary dark:focus:ring-offset-background-dark">
                        Update Information
                        </button>
                     </div>
                     <!-- Toast (hidden by default) -->
                     <div id="info-toast"
                        class="hidden fixed bottom-5 right-5 bg-blue-100 text-blue-800 px-4 py-2 shadow-lg border border-blue-300">
                        Info updated successfully
                     </div>
                     <!-- Script at bottom -->
                     <!-- <script>
                        document.getElementById("update-btn").addEventListener("click", function () {
                          fetch("{{ url_for('update_info') }}")
                            .then(response => response.text())
                            .then(data => {
                              const toast = document.getElementById("toast");
                              toast.innerText = data;
                              toast.classList.remove("hidden");
                        
                              setTimeout(() => {
                                toast.classList.add("hidden");
                              }, 3000); // auto-hide after 3 sec
                            })
                            .catch(error => console.error(error));
                        });
                     </script> -->
<script>
document.getElementById("update-btn").addEventListener("click", function () {
    const salary = document.getElementById("salary").value;

    const formData = new FormData();
    formData.append("salary", salary);

    fetch("{{ url_for('update_info') }}", {
        method: "POST",
        body: formData
    })
    .then(res => res.json())
    .then(data => {
        const toast = document.getElementById("info-toast");
        toast.innerText = data.message;
        toast.classList.remove("hidden");

        setTimeout(() => toast.classList.add("hidden"), 3000);
    })
    .catch(err => console.error(err));
});
</script>
                 
                  </section>
                  <section>
                     <h2 class="text-lg font-semibold text-gray-900 dark:text-white pb-2 border-b border-gray-200 dark:border-gray-700">Manage Categories</h2>
                     <div class="mt-4">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1" for="new-category">Add New Category</label>
                        <div class="mt-4 flex flex-col sm:flex-row gap-2">
                           <input id="new-category" type="text" placeholder="e.g., Groceries"
                              class="form-input flex-grow rounded-lg bg-white/5 dark:bg-black/10 border-gray-300 dark:border-gray-700 focus:ring-primary focus:border-primary text-gray-900 dark:text-white text-sm"/>
                           <button id="add-category" class="px-3 py-1.5 bg-primary text-white text-sm font-medium rounded-lg hover:bg-opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary dark:focus:ring-offset-background-dark">
                           Add Category
                           </button>
                        </div>
                        <!-- Toast -->
                        <div id="category-toast" class="hidden fixed bottom-5 right-5 bg-blue-100 text-blue-800 px-4 py-2 shadow-lg border border-blue-300">
                        </div>
                        <!-- Category List -->
                        <div class="mt-4 flow-root">
                           <ul id="category-list" class="divide-y divide-gray-200 dark:divide-gray-700" role="list">
                              <li class="py-2 sm:py-3">
                                 <div class="flex items-center space-x-3">
                                    <div class="flex-1 min-w-0">
                                       <p class="text-sm font-medium text-gray-900 truncate dark:text-white">Food</p>
                                    </div>
                                    <button class="inline-flex items-center text-sm font-semibold text-red-600 dark:text-red-500 hover:text-red-800 dark:hover:text-red-400 remove-btn">Remove</button>
                                 </div>
                              </li>
                              <!-- Other categories -->
                           </ul>
                        </div>
                        <script>
                           document.getElementById("add-category").addEventListener("click", function () {
                               const input = document.getElementById("new-category");
                               const category = input.value.trim();
                               if (!category) return;
                           
                               const formData = new FormData();
                               formData.append("new-category", category);
                           
                               fetch("{{ url_for('add_category') }}", {
                                   method: "POST",
                                   body: formData
                               })
                               .then(response => response.json())
                               .then(data => {
                                   const toast = document.getElementById("toast");
                                   toast.innerText = data.message;
                                   toast.classList.remove("hidden");
                                   setTimeout(() => toast.classList.add("hidden"), 3000);
                           
                                   if (data.success) {
                                       // Add new category to the list
                                       const list = document.getElementById("category-list");
                                       const li = document.createElement("li");
                                       li.className = "py-2 sm:py-3";
                                       li.innerHTML = `
                                           <div class="flex items-center space-x-3">
                                               <div class="flex-1 min-w-0">
                                                   <p class="text-sm font-medium text-gray-900 truncate dark:text-white">${data.category}</p>
                                               </div>
                                               <button class="inline-flex items-center text-sm font-semibold text-red-600 dark:text-red-500 hover:text-red-800 dark:hover:text-red-400 remove-btn">Remove</button>
                                           </div>`;
                                       list.appendChild(li);
                           
                                       // Clear input
                                       input.value = "";
                                   }
                               })
                               .catch(error => console.error(error));
                           });
                           
                           // Optional: Remove category dynamically
                           document.getElementById("category-list").addEventListener("click", function(e){
                               if(e.target && e.target.classList.contains("remove-btn")){
                                   e.target.closest("li").remove();
                               }
                           });
                        </script>
                        
                     </div>
                  </section>
               </div>
            </div>
         </main>
      </div>
   </body>
</html>